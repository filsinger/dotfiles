#!/bin/bash

print_external_ip()
{
	prefix=""
	if [[ $# == 1 ]]
	then
	    prefix="Internet : "
	fi

	echo "$prefix"$(curl -s checkip.dyndns.org|sed -e 's/.*Current IP Address: //' -e 's/<.*$//')
}

print_local_ip()
{
	prefix=""
	if [[ $# == 1 ]]
	then
	    prefix="Local    : "
	fi

	which ip > /dev/null
    if [[ "$?" == '0' ]]; then
		echo "$prefix"$(ip -o addr show | grep -E enp[0-9]+s[0-9]+ | grep -Ev '[0-9]+: (lo|docker)' | grep -Eo 'inet [0-9]+.[0-9]+.[0-9]+.[0-9]+' | cut -d \  -f 2)
	else
		if [[ -z $(ipconfig getifaddr en1) ]]
		then
			echo "$prefix"$(ipconfig getifaddr en0)
		else
			echo "$prefix"$(ipconfig getifaddr en1)
		fi
	fi
}

if [[ $# == 0 ]]
then
	print_external_ip -v
	print_local_ip -v
else

	if [[ $1 == '-e' ]]
	then
		print_external_ip
	fi

	if [[ $1 == '-l' ]]
	then
		print_local_ip
	fi
fi
